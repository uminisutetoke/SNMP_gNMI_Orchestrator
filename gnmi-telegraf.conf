[agent]
  interval = "10s"
  flush_interval = "10s"
  hostname = "gnmi-collector"

[[outputs.mqtt]]
  servers = ["tcp://192.168.1.1:1883"]
  topic_prefix = "telemetry/gnmi"
  data_format = "influx"

[[inputs.gnmi]]
  addresses = ["srl1:57400"]
  username = "admin"
  password = "admin"

  # TLSの検証をスキップするための正しい設定は、この一行だけです
  insecure_skip_verify = true
  
  [[inputs.gnmi.subscription]]
    name = "interface_counters"
    origin = "openconfig"
    path = "/interfaces/interface/state/counters"
    subscription_mode = "SAMPLE"
    sample_interval = "10s"
