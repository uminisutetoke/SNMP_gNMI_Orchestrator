name: net-stack
topology:
  nodes:
    srl1:
      kind: nokia_srlinux
      image: ghcr.io/nokia/srlinux # 以前成功したバージョン
      ports:
      - 57400:57400
      memory: 8G
      startup-config: srl_config.json # 作成したJSONファイルを指定

    snmp-collector:
      kind: linux
      image: telegraf:1.29
      binds:
        - ./snmp-telegraf.conf:/etc/telegraf/telegraf.conf:ro
      cmd: telegraf

    gnmi-collector:
      kind: linux
      image: telegraf:1.29
      binds:
        - ./gnmi-telegraf.conf:/etc/telegraf/telegraf.conf:ro
      cmd: telegraf


  links:
    - endpoints: ["srl1:e1-1", "snmp-collector:eth1"]
    - endpoints: ["srl1:e1-2", "gnmi-collector:eth1"]
